SELECT CITY,
(SELECT COUNT(*) FROM CUSTOMERS WHERE CITYID=C.ID) AS TOPLAMSAYI,
(SELECT COUNT(*) FROM CUSTOMERS WHERE CITYID=C.ID AND GENDER='E') AS TOPLAMERKEK,
(SELECT COUNT(*) FROM CUSTOMERS WHERE CITYID=C.ID AND GENDER='K') AS TOPLAMBAYAN
FROM CITIES C
ORDER BY 2 DESC
